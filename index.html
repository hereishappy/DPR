<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scaffolding Data Collection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .card-transition {
            transition: all 0.3s ease-in-out;
        }
        .hidden-card {
            transform: translateX(100%);
            opacity: 0;
        }
        .visible-card {
            transform: translateX(0);
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-900 to-blue-700 min-h-screen">
    <!-- Login Card -->
    <div id="loginCard" class="card-transition visible-card">
        <div class="container mx-auto px-4 py-8">
            <div class="max-w-md mx-auto bg-white rounded-xl shadow-2xl p-6">
                <div class="text-center mb-6">
                    <h1 class="text-2xl font-bold text-gray-800 mb-2">Scaffolding Data Collection</h1>
                    <div class="w-16 h-1 bg-blue-600 mx-auto rounded"></div>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Select Supervisor</label>
                    <select id="supervisorSelect" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500">
                        <option value="">Choose Supervisor</option>
                        <option value="MAHENDRA KUMAR">MAHENDRA KUMAR</option>
                        <option value="PINTU SAH">PINTU SAH</option>
                        <option value="HARKIRAT SINGH">HARKIRAT SINGH</option>
                        <option value="SUNIL CHAUHAN">SUNIL CHAUHAN</option>
                        <option value="NSUP1">NSUP1</option>
                        <option value="NSUP2">NSUP2</option>
                        <option value="NSUP3">NSUP3</option>
                        <option value="NSUP4">NSUP4</option>
                    </select>
                </div>
                
                <div class="mb-6">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Enter PIN</label>
                    <input type="password" id="pinInput" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" placeholder="Enter PIN (e.g., MAHE13)">
                </div>
                
                <button onclick="login()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition duration-200">
                    LOGIN
                </button>
                
                <div id="loginError" class="mt-4 text-red-600 text-sm text-center hidden"></div>
            </div>
        </div>
    </div>

    <!-- Attendance Card -->
    <div id="attendanceCard" class="card-transition hidden-card absolute top-0 left-0 w-full">
        <div class="container mx-auto px-4 py-8">
            <div class="max-w-md mx-auto bg-white rounded-xl shadow-2xl p-6">
                <div class="text-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800">Attendance Entry</h2>
                    <p class="text-sm text-gray-600">Supervisor: <span id="supervisorName" class="font-semibold text-blue-600"></span></p>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Worker Name</label>
                    <input type="text" id="workerNameInput" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" placeholder="Enter worker name">
                </div>
                
                <button onclick="addWorker()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg mb-4 transition duration-200">
                    Add Worker
                </button>
                
                <div id="workersList" class="mb-4 max-h-40 overflow-y-auto">
                    <h3 class="text-sm font-bold text-gray-700 mb-2">Added Workers:</h3>
                    <div id="workersContainer" class="space-y-1"></div>
                </div>
                
                <button onclick="submitAndShareAttendance()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition duration-200">
                    Submit and Share
                </button>
            </div>
        </div>
    </div>

    <!-- Work Data Card -->
    <div id="workDataCard" class="card-transition hidden-card absolute top-0 left-0 w-full">
        <div class="container mx-auto px-4 py-8">
            <div class="max-w-md mx-auto bg-white rounded-xl shadow-2xl p-6">
                <div class="text-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800">Work Data Entry</h2>
                    <p class="text-sm text-gray-600">Supervisor: <span id="workSupervisorName" class="font-semibold text-blue-600"></span></p>
                </div>
                
                <div class="mb-4">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Work Type</label>
                    <select id="workTypeSelect" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500">
                        <option value="">Select Work Type</option>
                        <option value="ERECTION">ERECTION</option>
                        <option value="DISMANTLING">DISMANTLING</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">Length</label>
                        <input type="number" id="lengthInput" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" placeholder="Length">
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">Width</label>
                        <input type="number" id="widthInput" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" placeholder="Width">
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">Height</label>
                        <input type="number" id="heightInput" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" placeholder="Height">
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">Quantity</label>
                        <input type="number" id="quantityInput" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500" placeholder="Quantity">
                    </div>
                </div>
                
                <div class="mb-4">
                    <p class="text-sm text-gray-700">Volume: <span id="calculatedVolume" class="font-bold text-blue-600">0</span></p>
                </div>
                
                <button onclick="addWorkEntry()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg mb-4 transition duration-200">
                    Add Entry
                </button>
                
                <div id="workEntriesList" class="mb-4 max-h-40 overflow-y-auto">
                    <h3 class="text-sm font-bold text-gray-700 mb-2">Work Entries:</h3>
                    <div id="workEntriesContainer" class="space-y-1"></div>
                </div>
                
                <button onclick="proceedToOvertime()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition duration-200">
                    Proceed to Overtime
                </button>
            </div>
        </div>
    </div>

    <!-- Overtime Card -->
    <div id="overtimeCard" class="card-transition hidden-card absolute top-0 left-0 w-full">
        <div class="container mx-auto px-4 py-8">
            <div class="max-w-md mx-auto bg-white rounded-xl shadow-2xl p-6">
                <div class="text-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800">Overtime Entry</h2>
                    <p class="text-sm text-gray-600">Supervisor: <span id="overtimeSupervisorName" class="font-semibold text-blue-600"></span></p>
                </div>
                
                <div id="overtimeWorkersList" class="mb-4 max-h-60 overflow-y-auto">
                    <h3 class="text-sm font-bold text-gray-700 mb-2">Workers Overtime:</h3>
                    <div id="overtimeWorkersContainer" class="space-y-2"></div>
                </div>
                
                <button onclick="proceedToProductivity()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition duration-200">
                    Proceed to Productivity
                </button>
            </div>
        </div>
    </div>

    <!-- Productivity Card -->
    <div id="productivityCard" class="card-transition hidden-card absolute top-0 left-0 w-full">
        <div class="container mx-auto px-4 py-8">
            <div class="max-w-md mx-auto bg-white rounded-xl shadow-2xl p-6">
                <div class="text-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800">Productivity Report</h2>
                    <p class="text-sm text-gray-600">Supervisor: <span id="productivitySupervisorName" class="font-semibold text-blue-600"></span></p>
                </div>
                
                <div class="bg-gray-50 rounded-lg p-4 mb-6 space-y-2">
                    <div class="flex justify-between">
                        <span class="text-gray-700">Total Erection:</span>
                        <span id="totalErection" class="font-bold text-green-600">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-700">Total Dismantling:</span>
                        <span id="totalDismantling" class="font-bold text-red-600">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-700">Total Manhours:</span>
                        <span id="totalManhours" class="font-bold text-blue-600">0</span>
                    </div>
                    <hr class="my-2">
                    <div class="flex justify-between">
                        <span class="text-gray-700 font-bold">Productivity:</span>
                        <span id="productivityValue" class="font-bold text-purple-600">0</span>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="shareReport()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition duration-200">
                        Share Report
                    </button>
                    <button onclick="resetApp()" class="bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg transition duration-200">
                        Reset
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentSupervisor = '';
        let workers = [];
        let workEntries = [];
        let overtimeData = {};
        let sessionData = {};

        // PIN mapping
        const pinMapping = {
            'MAHENDRA KUMAR': 'MAHE13',
            'PINTU SAH': 'PINT13',
            'HARKIRAT SINGH': 'HARK13',
            'SUNIL CHAUHAN': 'SUNI13',
            'NSUP1': 'NSUP13',
            'NSUP2': 'NSU213',
            'NSUP3': 'NSU313',
            'NSUP4': 'NSU413'
        };

        // Auto-calculate volume
        function calculateVolume() {
            const length = parseFloat(document.getElementById('lengthInput').value) || 0;
            const width = parseFloat(document.getElementById('widthInput').value) || 0;
            const height = parseFloat(document.getElementById('heightInput').value) || 0;
            const quantity = parseFloat(document.getElementById('quantityInput').value) || 0;
            
            const volume = length * width * height * quantity;
            document.getElementById('calculatedVolume').textContent = volume.toFixed(2);
        }

        // Add event listeners for auto calculation
        document.addEventListener('DOMContentLoaded', function() {
            ['lengthInput', 'widthInput', 'heightInput', 'quantityInput'].forEach(id => {
                document.getElementById(id).addEventListener('input', calculateVolume);
            });
        });

        function login() {
            const supervisor = document.getElementById('supervisorSelect').value;
            const pin = document.getElementById('pinInput').value.toUpperCase();
            const errorDiv = document.getElementById('loginError');

            if (!supervisor || !pin) {
                showError('Please select supervisor and enter PIN');
                return;
            }

            if (pinMapping[supervisor] !== pin) {
                showError('Invalid PIN for selected supervisor');
                return;
            }

            currentSupervisor = supervisor;
            
            // Reset all arrays to ensure supervisor isolation
            workers = [];
            workEntries = [];
            overtimeData = {};
            sessionData = {};
            
            // Check if THIS supervisor has existing session (supervisor-specific data)
            const existingSession = localStorage.getItem(`session_${supervisor}`);
            if (existingSession) {
                sessionData = JSON.parse(existingSession);
                
                // Only load data if it belongs to the current supervisor
                if (sessionData.supervisor === supervisor) {
                    workers = sessionData.workers || [];
                    workEntries = sessionData.workEntries || [];
                    overtimeData = sessionData.overtimeData || {};
                    
                    // Skip to work data card if attendance already submitted
                    if (sessionData.attendanceSubmitted && workers.length > 0) {
                        showCard('workDataCard');
                        document.getElementById('workSupervisorName').textContent = supervisor;
                        displayWorkEntries();
                        return;
                    }
                }
            }

            showCard('attendanceCard');
            document.getElementById('supervisorName').textContent = supervisor;
        }

        function showError(message) {
            const errorDiv = document.getElementById('loginError');
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
            setTimeout(() => errorDiv.classList.add('hidden'), 3000);
        }

        function showCard(cardId) {
            const cards = ['loginCard', 'attendanceCard', 'workDataCard', 'overtimeCard', 'productivityCard'];
            cards.forEach(id => {
                const card = document.getElementById(id);
                if (id === cardId) {
                    card.classList.remove('hidden-card');
                    card.classList.add('visible-card');
                } else {
                    card.classList.add('hidden-card');
                    card.classList.remove('visible-card');
                }
            });
        }

        function addWorker() {
            const workerName = document.getElementById('workerNameInput').value.trim();
            if (!workerName) return;

            if (!workers.includes(workerName)) {
                workers.push(workerName);
                displayWorkers();
                document.getElementById('workerNameInput').value = '';
                document.getElementById('workerNameInput').focus();
            }
        }

        function displayWorkers() {
            const container = document.getElementById('workersContainer');
            container.innerHTML = workers.map(worker => 
                `<div class="bg-blue-50 px-3 py-1 rounded text-sm">${worker}</div>`
            ).join('');
        }

        function submitAndShareAttendance() {
            if (workers.length === 0) {
                alert('Please add at least one worker');
                return;
            }

            // Save session data to cloud (localStorage acts as cloud storage)
            sessionData.workers = workers;
            sessionData.supervisor = currentSupervisor;
            sessionData.attendanceSubmitted = true;
            sessionData.date = new Date().toISOString().split('T')[0];
            localStorage.setItem(`session_${currentSupervisor}`, JSON.stringify(sessionData));

            // Send attendance data to cloud
            sendAttendanceData();

            // Create attendance report for WhatsApp
            const today = new Date();
            const dateString = today.toLocaleDateString('en-GB'); // DD/MM/YYYY format
            
            const attendanceReport = `ðŸ“‹ ATTENDANCE REPORT

Supervisor: ${currentSupervisor}
Date: ${dateString}

ðŸ‘· WORKERS PRESENT (${workers.length}):
${workers.map((worker, index) => `${index + 1}. ${worker}`).join('\n')}

âœ… Attendance submitted successfully!
Generated by Scaffolding Data Collection App`;

            // Share to WhatsApp immediately
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(attendanceReport)}`;
            
            // Try multiple methods to ensure WhatsApp opens
            try {
                // Method 1: Direct window.open
                const newWindow = window.open(whatsappUrl, '_blank');
                
                // Method 2: If popup blocked, try location.href
                if (!newWindow || newWindow.closed || typeof newWindow.closed == 'undefined') {
                    window.location.href = whatsappUrl;
                }
            } catch (error) {
                // Method 3: Fallback - create a temporary link and click it
                const tempLink = document.createElement('a');
                tempLink.href = whatsappUrl;
                tempLink.target = '_blank';
                document.body.appendChild(tempLink);
                tempLink.click();
                document.body.removeChild(tempLink);
            }

            // Show success message and logout after a short delay
            setTimeout(() => {
                alert('Attendance submitted and shared to WhatsApp! Logging out...');
                
                // Reset current session variables but keep data in localStorage
                currentSupervisor = '';
                
                // Clear login form
                document.getElementById('supervisorSelect').value = '';
                document.getElementById('pinInput').value = '';
                
                // Return to login card
                showCard('loginCard');
            }, 2000);
        }

        function addWorkEntry() {
            const workType = document.getElementById('workTypeSelect').value;
            const length = parseFloat(document.getElementById('lengthInput').value);
            const width = parseFloat(document.getElementById('widthInput').value);
            const height = parseFloat(document.getElementById('heightInput').value);
            const quantity = parseFloat(document.getElementById('quantityInput').value);

            if (!workType || !length || !width || !height || !quantity) {
                alert('Please fill all fields');
                return;
            }

            const volume = length * width * height * quantity;
            const entry = {
                workType,
                length,
                width,
                height,
                quantity,
                volume,
                date: new Date().toISOString().split('T')[0],
                supervisor: currentSupervisor // Add supervisor to each entry
            };

            workEntries.push(entry);
            displayWorkEntries();
            clearWorkForm();

            // Save to supervisor-specific session
            sessionData.workEntries = workEntries;
            sessionData.supervisor = currentSupervisor;
            localStorage.setItem(`session_${currentSupervisor}`, JSON.stringify(sessionData));

            // Send to Google Sheets
            sendDPRData(entry);
        }

        function displayWorkEntries() {
            const container = document.getElementById('workEntriesContainer');
            container.innerHTML = workEntries.map((entry, index) => 
                `<div class="bg-gray-50 px-3 py-2 rounded text-xs">
                    <strong>${entry.workType}</strong><br>
                    ${entry.length}Ã—${entry.width}Ã—${entry.height} Ã— ${entry.quantity} = ${entry.volume}
                </div>`
            ).join('');
        }

        function clearWorkForm() {
            ['workTypeSelect', 'lengthInput', 'widthInput', 'heightInput', 'quantityInput'].forEach(id => {
                document.getElementById(id).value = '';
            });
            document.getElementById('calculatedVolume').textContent = '0';
        }

        function proceedToOvertime() {
            showCard('overtimeCard');
            document.getElementById('overtimeSupervisorName').textContent = currentSupervisor;
            displayOvertimeWorkers();
        }

        function displayOvertimeWorkers() {
            const container = document.getElementById('overtimeWorkersContainer');
            container.innerHTML = workers.map(worker => 
                `<div class="flex items-center justify-between bg-gray-50 px-3 py-2 rounded">
                    <span class="text-sm font-medium">${worker}</span>
                    <div class="flex items-center space-x-2">
                        <span class="text-xs">OT Hours:</span>
                        <input type="number" id="ot_${worker.replace(/\s+/g, '_')}" 
                               class="w-16 px-2 py-1 border rounded text-sm" 
                               value="${overtimeData[worker] || 0}" 
                               onchange="updateOvertime('${worker}', this.value)">
                        <span class="text-xs">Total: ${8 + (overtimeData[worker] || 0)}h</span>
                    </div>
                </div>`
            ).join('');
        }

        function updateOvertime(worker, hours) {
            overtimeData[worker] = parseFloat(hours) || 0;
            sessionData.overtimeData = overtimeData;
            sessionData.supervisor = currentSupervisor;
            localStorage.setItem(`session_${currentSupervisor}`, JSON.stringify(sessionData));
            displayOvertimeWorkers();
        }

        function proceedToProductivity() {
            calculateProductivity();
            showCard('productivityCard');
            document.getElementById('productivitySupervisorName').textContent = currentSupervisor;
        }

        function calculateProductivity() {
            const totalErection = workEntries
                .filter(entry => entry.workType === 'ERECTION')
                .reduce((sum, entry) => sum + entry.volume, 0);
            
            const totalDismantling = workEntries
                .filter(entry => entry.workType === 'DISMANTLING')
                .reduce((sum, entry) => sum + entry.volume, 0);
            
            const totalManhours = workers.reduce((sum, worker) => 
                sum + 8 + (overtimeData[worker] || 0), 0);
            
            const productivity = totalManhours > 0 ? 
                (totalErection + (totalDismantling / 2)) / totalManhours : 0;

            document.getElementById('totalErection').textContent = totalErection.toFixed(2);
            document.getElementById('totalDismantling').textContent = totalDismantling.toFixed(2);
            document.getElementById('totalManhours').textContent = totalManhours.toFixed(2);
            document.getElementById('productivityValue').textContent = productivity.toFixed(3);

            // Send manpower data to Google Sheets (supervisor-specific)
            workers.forEach(worker => {
                sendManpowerData({
                    date: new Date().toISOString().split('T')[0],
                    supervisor: currentSupervisor,
                    empName: worker,
                    otHours: overtimeData[worker] || 0,
                    totalManhours: 8 + (overtimeData[worker] || 0),
                    supervisorId: currentSupervisor // Add supervisor ID for separation
                });
            });
        }

        function shareReport() {
            const totalErection = document.getElementById('totalErection').textContent;
            const totalDismantling = document.getElementById('totalDismantling').textContent;
            const totalManhours = document.getElementById('totalManhours').textContent;
            const productivity = document.getElementById('productivityValue').textContent;
            
            const workersWithOT = workers.map(worker => 
                `${worker}: ${overtimeData[worker] || 0}h OT`
            ).join('\n');

            const report = `ðŸ“Š SCAFFOLDING DAILY REPORT
            
Supervisor: ${currentSupervisor}
Date: ${new Date().toLocaleDateString()}

ðŸ“ˆ PRODUCTIVITY: ${productivity}

ðŸ“Š WORK SUMMARY:
â€¢ Total Erection: ${totalErection}
â€¢ Total Dismantling: ${totalDismantling}
â€¢ Total Manhours: ${totalManhours}

ðŸ‘· WORKERS & OVERTIME:
${workersWithOT}

Generated by Scaffolding Data Collection App`;

            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(report)}`;
            window.open(whatsappUrl, '_blank');
        }

        function resetApp() {
            if (confirm('Are you sure you want to reset all data? This action cannot be undone.')) {
                // Clear session data
                localStorage.removeItem(`session_${currentSupervisor}`);
                
                // Reset all variables
                currentSupervisor = '';
                workers = [];
                workEntries = [];
                overtimeData = {};
                sessionData = {};
                
                // Clear all forms
                document.getElementById('supervisorSelect').value = '';
                document.getElementById('pinInput').value = '';
                document.getElementById('workerNameInput').value = '';
                clearWorkForm();
                
                // Return to login
                showCard('loginCard');
            }
        }

        // Google Sheets integration functions
        function sendAttendanceData() {
            const attendanceData = {
                date: new Date().toISOString().split('T')[0],
                supervisorName: currentSupervisor,
                workers: workers.join(', '),
                totalWorkers: workers.length
            };

            // Replace with your Google Apps Script Web App URL for attendance
            const scriptUrl = 'YOUR_GOOGLE_APPS_SCRIPT_URL_FOR_ATTENDANCE';
            
            fetch(scriptUrl, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(attendanceData)
            }).catch(error => console.log('Attendance data sent (no-cors mode)'));
        }

        function sendDPRData(entry) {
            const data = {
                date: entry.date,
                supervisorName: currentSupervisor,
                workType: entry.workType,
                length: entry.length,
                width: entry.width,
                height: entry.height,
                qty: entry.quantity,
                volume: entry.volume,
                dismantling: entry.workType === 'DISMANTLING' ? entry.volume : '',
                erection: entry.workType === 'ERECTION' ? entry.volume : ''
            };

            // Replace with your Google Apps Script Web App URL
            const scriptUrl = 'YOUR_GOOGLE_APPS_SCRIPT_URL_FOR_DPR';
            
            fetch(scriptUrl, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }).catch(error => console.log('DPR data sent (no-cors mode)'));
        }

        function sendManpowerData(data) {
            // Replace with your Google Apps Script Web App URL
            const scriptUrl = 'YOUR_GOOGLE_APPS_SCRIPT_URL_FOR_MANPOWER';
            
            fetch(scriptUrl, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            }).catch(error => console.log('Manpower data sent (no-cors mode)'));
        }

        // Enter key support
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const activeCard = document.querySelector('.visible-card');
                if (activeCard.id === 'loginCard') login();
                else if (activeCard.id === 'attendanceCard') addWorker();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9663be34615828cd',t:'MTc1MzY5OTA2NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
